YUI.add("rg.core.util.ParameterFilter",function(a){a.namespace("rg.core.util");var b,c=window;a.rg.core.util.ParameterFilter={filterUrl:function(c){var d,e,f,g,h,i,j,k,l,m,n=!1;if(!b)return c;if(d=c.indexOf("#"),-1===d?e=c:(e=c.substr(0,d),f=c.substr(d+1)),g=e.indexOf("?"),-1!==g){h=e.substr(0,g),i=e.substr(g+1),j=a.QueryString.parse(i);for(k in b)b.hasOwnProperty(k)&&(l=b[k],j[l]&&(n=!0,delete j[l]));for(k in j)j.hasOwnProperty(k)&&"_"===k.substr(0,1)&&(n=!0,delete j[k]);if(n)return i=a.QueryString.stringify(j),m=h,i&&(m=m+"?"+i),f&&(m=m+"#"+f),m}return c},filter:function(d){var e=this;d?b=d:d=b,d&&c.history&&c.history.replaceState&&a.on("load",function(){var b=c.location.href,d=e.filterUrl(b);d!==b&&(c.history.replaceState(null,null,d),a.fire("ParameterFilter:historyStateReplaced"))})}}},"1.0.0",{requires:["querystring"]});
"use strict";YUI.add("rg-widgetloader-pushstate",function(a){a.namespace("rg"),a.namespace("rg.widget");var b,c="rendering";a.rg.CSS_RENDERING=c,a.rg.changePageLayout=b=function(b){var d=b.pageLayout;if(d)for(var e in d)if(d.hasOwnProperty(e)){var f=a.one(e),g=d[e];f.hasClass(c)&&(g+=" "+c),f.setAttribute("class",g)}b.pageTitle&&(document.title=b.pageTitle)};var d=function(b,c){var d={popStateUrl:null,pushStateUrl:null,widget:null},e=a.merge(d,c);a.fire(b,e)};a.rg.emptyStateHandler=function(){};var e=!1,f=function(){var f;e||(f=window.location.href,e=!0,window.onpopstate=function(e){var g,h,i,j,k,l,m,n,o,p,q;if(!e.state||!e.state.pushStateUrl)return void a.rg.emptyStateHandler(f);if(g=e.state.pushStateUrl,h=e.state.targetContainer,i=e.state.renderer,j=e.state.beforeLoadEvent,k=e.state.beforeEvent,l=e.state.afterEvent,m=e.state.afterRenderedEvent,o=e.state.disablePageChangeLayout,p=e.state.pushStateConfig,q=e.state.additionalEventPayload,p)for(var r in p)if(p.hasOwnProperty(r)){if(n=a.one(r),!n)continue;g=p[r].url,i=p[r].renderer;break}n||(n=a.one(h)),j&&d(j,{popStateUrl:g,additionalEventPayload:q}),n.addClass(c),a.rg.cancelRunningRequests(),a.rg.addRequestToStack(a.rg.loadWidget(g,{},function(a){var e={before:function(){k&&d(k,{popStateUrl:g,widget:a,additionalEventPayload:q})},after:function(){o||b(a),l&&d(l,{popStateUrl:g,widget:a,additionalEventPayload:q})},afterRendered:function(){n&&n.getDOMNode()&&n.removeClass(c),m&&d(m,{popStateUrl:g,widget:a,additionalEventPayload:q})}};e[i]=n,a.render(e)},this,!0))})},g=function(a,e,f,g){var h={before:function(){a.beforeEvent&&d(a.beforeEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},after:function(){a.disablePageChangeLayout||b(e),a.afterEvent&&d(a.afterEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})},afterRendered:function(){g&&g.getDOMNode()&&g.removeClass(c),a.afterRenderedEvent&&d(a.afterRenderedEvent,{pushStateUrl:a.pushStateUrl,widget:e,additionalEventPayload:a.additionalEventPayload})}};return h[f]=g,h};a.rg.widget.handleAjaxPageLoad=function(b){if(2!==b.button&&!b._event.defaultPrevented){b.preventDefault();var c=b.currentTarget,d=c.getAttribute("href"),e=c.hasAttribute("data-pushState-config")?a.JSON.parse(c.getAttribute("data-pushState-config")):null,f="replaceContent",g="#content",h=c.hasAttribute("data-beforeload-event")?c.getAttribute("data-beforeload-event"):null,i=c.hasAttribute("data-before-event")?c.getAttribute("data-before-event"):null,j=c.hasAttribute("data-after-event")?c.getAttribute("data-after-event"):null,k=c.hasAttribute("data-after-rendered-event")?c.getAttribute("data-after-rendered-event"):null,l=c.hasAttribute("data-disable-layout-change")?c.getAttribute("data-disable-layout-change"):null,m=c.hasAttribute("data-additional-event-payload")?c.getAttribute("data-additional-event-payload"):null,n=c.hasAttribute("data-disable-history")?"true"===c.getAttribute("data-disable-history"):!1;if(this.onHandleAjaxPageLoad&&this.onHandleAjaxPageLoad.call(this,b),!b.preventAjaxPageLoad){var o={renderer:f,targetContainer:g,beforeLoadEvent:h,beforeEvent:i,afterEvent:j,afterRenderedEvent:k,disablePageChangeLayout:l,pushStateUrl:d,pushStateConfig:e,additionalEventPayload:m,disableHistory:n};a.rg.widget.ajaxPageLoad({},o)}}},a.rg.widget.ajaxPageLoad=function(b,e,h,i){var j,k,l,m,n={};if(e.pushStateConfig)for(m in e.pushStateConfig)if(e.pushStateConfig.hasOwnProperty(m)){if(l=a.one(m),!l)continue;j=e.pushStateConfig[m].url,k=e.pushStateConfig[m].renderer;break}e.pushStateUrlFiltered=a.rg.core.util.ParameterFilter.filterUrl(e.pushStateUrl),j&&k&&l||(j=e.pushStateUrl,k=e.renderer,l=a.one(e.targetContainer)),l.addClass(c);var o=a.StyleSheet(l.generateID()),p=m||e.targetContainer;return o.set(p+"."+c,{minHeight:"100%",overflow:"hidden"}),!a.rg.supportsPushState()||e.disableHistory?void a.rg.loadWidget(j,b,function(a){n[k]=l,a.render(n),h&&h.call(a,i)},this,null,"GET",{"x-push-state":1}):(e.beforeLoadEvent&&d(e.beforeLoadEvent,{pushStateUrl:e.pushStateUrl,additionalEventPayload:e.additionalEventPayload}),f(),history.pushState(e,e.pushStateUrlFiltered,e.pushStateUrlFiltered),a.rg.cancelRunningRequests(),void a.rg.addRequestToStack(a.rg.loadWidget(j,b,function(b){b.success?(n=g(e,b,k,l),b.render(n)):a.rg.createWidget({id:"PageLoadError",templateName:"application/stubs/Error.html",data:{widgetId:"PageLoadError",errorCode:b.errorCode,correlationId:b.correlationId}},function(a){n=g(e,a,k,l),a.render(n)},this),a.Lang.isFunction(h)&&h.call(i,b)},this,!0,"GET",{"x-push-state":1})))},a.rg.supportsPushState=function(){return!(!window.history||!history.pushState)},a.rg.supportsReplaceState=function(){return!(!window.history||!history.replaceState)},a.rg.requestStack=[],a.rg.addRequestToStack=function(b){a.rg.requestStack.push(b)},a.rg.cancelRunningRequests=function(){a.rg.requestStack=a.Array.filter(a.rg.requestStack,function(a){return a&&a.isInProgress&&a.isInProgress()&&a.abort(),!1})},a.on("load",function(){a.later(1e3,this,function(){a.rg.emptyStateHandler=function(b){a.rg.utils.url.forwardTo(b)}})})},"0.0.1",{requires:["json","stylesheet","rg-utils-url","rg.core.util.ParameterFilter"]});
YUI.add("rg.core.pagespeed.Monitoring",function(a){a.namespace("rg.core.pagespeed");var b=window.performance;a.rg.core.pagespeed.Monitoring={trackByImage:function(b,c){var d=a.Node.create("<img/>"),e=function(){a.Lang.later(0,null,function(){d.remove(!0)})};d.setStyles({overflow:"hidden",height:"0",width:"0"}),d.setAttrs({width:0,height:0}),d.on("load",e),d.on("error",e),a.one("body").append(d);var f=b+"?"+a.QueryString.stringify(c);d.set("src",f),a.later(0,null,function(){a.fire("core.pagespeed.Monitoring:tracked",c)})},monitorPage:function(b,c,d,e,f){var g=this;a.on("load",function(){a.later(3e3,g,function(){g.monitorPageLoad(b,c,d,e,f),g.monitorResources(b,c,d)})})},monitorPageLoad:function(a,c,d,e,f){var g,h;if(b&&b.timing&&window.rgConfig&&window.rgConfig.backendTime){g=b.timing,h=g.loadEventEnd?g.loadEventEnd:(new Date).getTime();var i=g.connectEnd-g.connectStart,j=g.responseEnd-g.requestStart,k=h-g.domLoading,l=h-g.navigationStart,m=g.responseStart-g.requestStart,n=g.domComplete-g.domLoading,o=g.loadEventStart?h-g.loadEventStart:0,p=g.domInteractive-g.domLoading,q=g.domComplete-g.domInteractive,r=Math.max(0,g.domainLookupEnd-g.domainLookupStart),s=0;g.secureConnectionStart&&(s=g.connectEnd-g.secureConnectionStart),i>6e4||0>i||j>6e4||0>j||k>6e4||0>k||l>6e4||0>l||m>6e4||0>m||this.trackByImage(a,{correlationId:e,cfp:f,page:c,fp:d,connectTime:i,requestTime:j,renderTime:k,completeRequestTime:l,firstContentTime:m,backendTime:window.rgConfig.backendTime,domProcessingTime:n,loadEventTime:o,domLoadingTime:p,domCompletionTime:q,dnsLookupTime:r,sslHandshakeTime:s,continent:window.rgConfig.continent.replace(" ","_")})}},monitorResources:function(c,d,e){if(b&&b.getEntriesByType&&"function"==typeof b.getEntriesByType&&window.rgConfig&&window.rgConfig.continent){var f=b.getEntriesByType("resource"),g={css:{count:0,totalDuration:0},js:{count:0,totalDuration:0},html:{count:0,totalDuration:0},image:{count:0,totalDuration:0}},h=0,i=0;a.Array.each(f,function(a){var b;if(a.name.match(/\.css$/))b="css";else if(a.name.match(/\.js$/))b="js";else if(a.name.match(/\.html$/))b="html";else{if(!a.name.match(/\.(png|jpeg|jpg|gif)$/))return;b="image"}g[b].count++,g[b].totalDuration+=parseInt(a.duration,10)}),a.Array.each(a.rg.performedRequests,function(a){h++,i+=parseInt(a.duration,10)});var j={page:d,fp:e,cssCount:g.css.count,cssTotalDuration:Math.max(0,g.css.totalDuration),jsCount:g.js.count,jsTotalDuration:Math.max(0,g.js.totalDuration),htmlCount:g.html.count,htmlTotalDuration:Math.max(0,g.html.totalDuration),imageCount:g.image.count,imageTotalDuration:Math.max(0,g.image.totalDuration),ajaxCount:h,ajaxTotalDuration:Math.max(0,i),continent:window.rgConfig.continent};a.fire("measuredResourceTimings",j),this.trackByImage(c,j)}}}},"1.0.0",{requires:["querystring","node"]});
"use strict";YUI.add("rg-widgetloader",function(a){function b(b){b&&(c(),window.reactData.initState=a.mix(window.reactData.initState,b,!1,null,0,!0))}function c(){window.reactData||(window.reactData={widgets:{},initState:{},entryPoints:{}})}function d(a){var b;if(a&&"object"==typeof a){if(!a._isYUI)for(b in a)a.hasOwnProperty(b)&&(a[b]=d(a[b]));if(a.templateName){var c=a.widgetId?a.widgetId:a.id;return window.reactData.widgets[c]=a,c}}return a}a.namespace("rg"),a.namespace("rg.widget"),a.rg.EVENT_SEPARATOR=":";var e=function(){return(new Date).getTime()};!a.config.debug&&"object"==typeof console&&console.log&&(console.log("%cWARNING!","color:white; background:red; font-size: 16pt"),console.log("%cUsing this console may allow attackers to impersonate you and steal your information using an attack called Self-XSS. Do not enter or paste code that you do not understand.","font-size: 14pt")),a.rg.createWidget=function(c,d,f,g){if(a.rg.WidgetView.isRenderableWidget(c)){a.rg.time("Create widget "+c.id);var h,i=e(),j=function(b){b.data.renderTime=h-i,b.data.completeRequestTime=b.data.backendTime+b.data.renderTime,a.later(50,null,function(){a.rg.core.pagespeed.Monitoring.trackByImage(b.ep,b.data)})},k=function(b){b.once("rendered",function(){h=e(),a.Lang.isArray(g)?a.Array.each(g,function(a){j(a)}):j(g)})};b(c.state),a.rg.timeEnd("Create widget "+c.id),a.rg.time("Create widget load yui "+c.id);var l=c.yuiModules;if(l||(l=[]),c.collectQueueCacheKey){var m=lscache.get(c.collectQueueCacheKey);m&&m.yuiModules&&(l=l.concat(m.yuiModules),l=a.Array.dedupe(l))}a.use(l,function(a){a.rg.timeEnd("Create widget load yui "+c.id),a.rg.time("Create widget get instance "+c.id);var b;b=c._isReact?a.rg.ReactWidgetView.getInstance(c):a.rg.WidgetView.getInstance(c),g&&k(b),a.rg.timeEnd("Create widget get instance "+c.id),d.call(f,b)})}},a.rg.createWidgetList=function(b,c,d){var e=[],f=[];a.Array.each(b,function(b){a.rg.WidgetView.isRenderableWidget(b)&&(f.push(b),b.yuiModules&&b.yuiModules.length>0&&(e=e.concat(b.yuiModules)))}),a.use(e,function(){var b=a.rg.getWidgetListViewInstance(f);c.call(d,b)})},a.rg.createInitialWidget=function(b){a.rg.widget.prepareWidgetTree(b,function(b){a.rg.attachWidgetTree(b)})},a.rg.loadAndRenderAsyncWidget=function(b,c){if(!b)throw new Error("Missing container for async load of "+c.innerWidgetUrl);a.rg.loadWidget(c.innerWidgetUrl,{},function(d){return d.success?void d.render({replace:b,after:function(b){c.hasPlaceHolder&&(b.hide(),a.rg.fadeToggle(b,null,{duration:1}))}}):void b.remove(!0)},this,null,"GET",{"X-Rg-AsyncLoad":1},c.innerWidgetCacheKey,c.innerWidgetTTL)},a.rg.attachWidgetTree=function(c){if(b(c.initState),c._isYUI){a.rg.resolveWidgetDataArray(c.data);var d=a.one("#"+c.id);if("application/stubs/AsyncClientSideRenderingWrapper.html"===c.templateName)return void a.rg.loadAndRenderAsyncWidget(d,c.data);var e=a.rg.WidgetView.getInstance(c);if(!d)return a.log('Cannot find container in DOM for widget "'+c.id+'".',"warn"),a.log(e),null;e.setContainer(d),e.fire("rendered",d)}else c._isReact&&a.rg.renderReactWidgetTree(c)},a.rg.renderReactWidgetTree=function(b){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];a.use(["webpack-common"],function(){c();var f=b.templateName,g=b.widgetId?b.widgetId:b.id;d(b),e&&window.reactData.widgets[g]&&(window.reactData.widgets[g].data.dialog=e),window.reactData.entryPoints[f]||(window.reactData.entryPoints[f]=[]),window.reactData.entryPoints[f].push(g),a.use(["react_"+f],function(){window.reactData.entryPoints[f]&&window["renderReact_"+f]&&window["renderReact_"+f]()})})},a.rg.time=function(a){},a.rg.timeEnd=function(a){},a.rg.resolveWidgetDataArray=function(b){for(var c in b)b.hasOwnProperty(c)&&b[c]&&(b[c].templateName&&(b[c]._isYUI||b[c]._isReact)?a.rg.attachWidgetTree(b[c]):(b[c]instanceof Array||b[c]instanceof Object)&&a.rg.resolveWidgetDataArray(b[c]))};var f=function(a){var b=a.split("/").pop(),c=b.split("?").shift(),d=c.split(".");return d.length<3?!1:"dep_"+c};a.rg.loadWidget=function(b,c,d,e,h,i,j,k,l){a.rg.time("Loading "+b),i=i?i:"GET",b=a.rg.utils.url.getUrlWithoutHash(b);var m=f(b);if(m){var n=lscache.get(m);n&&n.yuiModules&&a.use(n.yuiModules)}var o=function(c){return a.rg.timeEnd("Loading "+b),c.success?(m&&(c.result.collectQueueCacheKey=m),k&&"object"==typeof lscache&&lscache.set(k,c,l),void a.rg.createWidget(c.result,d,e,c.tracking)):void d.call(e,{render:function(){throw new Error(JSON.stringify(c.errors))},success:c.success,errors:c.errors,errorCode:c.result.errorCode,correlationId:c.result.correlationId})};if(k&&"object"==typeof lscache){var p=lscache.get(k);if(p)return void a.rg.createWidget(p.result,d,e,p.tracking)}var q=b+a.JSON.stringify(c);if(g[q]){var r=g[q];if(a.Lang.isString(r.state)&&"loading"==r.state)return g[q].state="render",g[q].callback=d,void(g[q].context=e);if(!r.widget)return;return o(r.widget),void(r.keep||delete g[q])}return a.rg.ajaxDbwAware(b,c,o,e,null,i,j)};var g={};a.rg.preloadWidget=function(b,c,d,e){b=a.rg.utils.url.getUrlWithoutHash(b),c=c||{};var f=b+a.JSON.stringify(c);g[f]||e&&"object"==typeof lscache&&lscache.get(e)||(g[f]={state:"loading",keep:!!d},a.rg.ajaxDbwAware(b,c,function(d){return g[f].widget=d,"render"==g[f].state?void a.rg.loadWidget(b,c,g[f].callback,g[f].context):(g[f].state="loaded",void(d.success&&a.rg.widget.prepareWidgetTree(d.result)))}))},a.rg.loadWidgetInDialog=function(b,c,d,e,f,g,h,i){var j=a.rg.widget.OpenedDialogRenderer.createDialog(h,i);a.rg.loadWidget(b,c,function(b){return b.success?void b.render({openedDialog:j,after:d}):(j.destroy(),void(a.Lang.isFunction(f)?f.call(e,b.errors):a.rg.notify(b.errors,"warning")))},e,!1,g)},a.rg.loadWidgetInTooltip=function(b,c,d,e,f,g){var h=a.rg.widget.TooltipRenderer.createTooltip(b,c);a.rg.loadWidget(d,e,function(b){return b.success?void b.render({tooltip:h,after:f}):(h.destroy(),void a.rg.notify(b.errors,"warning"))},g)},a.rg.generateEventIdentifier=function(b,c){var d;if(a.Lang.isFunction(b)&&b.NAME?d=b.NAME:a.Lang.isObject(b)&&b.fire&&b._eventPrefix&&(d=b._eventPrefix),!d)throw new Error("Object has no valid name identifier (NAME/eventPrefix).");if(!c)throw new Error("EventName is not valid.");var e=Array.prototype.slice.call(arguments,2);return[d,c,e.join(a.rg.EVENT_SEPARATOR)].join(a.rg.EVENT_SEPARATOR)},a.rg.hasOverlay=function(){return!!a.one(".has-overlay")}},"0.0.1",{requires:["rg.WidgetView","rg-header-notify","rg-string","rg-utils-url","rg-stubloader","rg-widgetloader-renderers","rg-widgetloader-renderer","rg-widgetloader-pushstate","rg.core.pagespeed.Monitoring","lscache"]});
YUI.add("rg-uri",function(a){a.namespace("rg");var b=function(){"use strict";function a(a){return null!==a&&""!==a}function b(a){a=a||"";var b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b.exec(a),g=14,h=this;for(this.uriParts={};g--;)this.uriParts[d[g]]=f[g]||"";this.uriParts[e.name]={},this.uriParts[d[12]].replace(e.parser,function(a,b,c){b&&(h.uriParts[e.name][b]=c)}),this.queryObj=new c(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}return b.prototype.protocol=function(a){return"undefined"!=typeof a&&(this.uriParts.protocol=a),this.uriParts.protocol},b.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},b.prototype.userInfo=function(a){return"undefined"!=typeof a&&(this.uriParts.userInfo=a),this.uriParts.userInfo},b.prototype.host=function(a){return"undefined"!=typeof a&&(this.uriParts.host=a),this.uriParts.host},b.prototype.port=function(a){return"undefined"!=typeof a&&(this.uriParts.port=a),this.uriParts.port},b.prototype.path=function(a){return"undefined"!=typeof a&&(this.uriParts.path=a),this.uriParts.path},b.prototype.query=function(a){return"undefined"!=typeof a&&(this.queryObj=new c(a)),this.queryObj},b.prototype.anchor=function(a){return"undefined"!=typeof a&&(this.uriParts.anchor=a),this.uriParts.anchor},b.prototype.setProtocol=function(a){return this.protocol(a),this},b.prototype.setHasAuthorityPrefix=function(a){return this.hasAuthorityPrefix(a),this},b.prototype.setUserInfo=function(a){return this.userInfo(a),this},b.prototype.setHost=function(a){return this.host(a),this},b.prototype.setPort=function(a){return this.port(a),this},b.prototype.setPath=function(a){return this.path(a),this},b.prototype.setQuery=function(a){return this.query(a),this},b.prototype.setAnchor=function(a){return this.anchor(a),this},b.prototype.getQueryParamValue=function(a){return this.query().getParamValue(a)},b.prototype.getQueryParamValues=function(a){return this.query().getParamValues(a)},b.prototype.deleteQueryParam=function(a,b){return 2===arguments.length?this.query().deleteParam(a,b):this.query().deleteParam(a),this},b.prototype.addQueryParam=function(a,b,c){return 3===arguments.length?this.query().addParam(a,b,c):this.query().addParam(a,b),this},b.prototype.replaceQueryParam=function(a,b,c){return 3===arguments.length?this.query().replaceParam(a,b,c):this.query().replaceParam(a,b),this},b.prototype.scheme=function(){var b="";return a(this.protocol())?(b+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(b+=":"),b+="//"):this.hasAuthorityPrefix()&&a(this.host())&&(b+="//"),b},b.prototype.origin=function(){var b=this.scheme();return a(this.userInfo())&&a(this.host())&&(b+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(b+="@")),a(this.host())&&(b+=this.host(),a(this.port())&&(b+=":"+this.port())),b},b.prototype.toString=function(){var b=this.origin();return a(this.path())&&(b+=this.path()),a(this.query().toString())&&(0!==this.query().toString().indexOf("?")&&(b+="?"),b+=this.query().toString()),a(this.anchor())&&(0!==this.anchor().indexOf("#")&&(b+="#"),b+=this.anchor()),b},b.prototype.clone=function(){return new b(this.toString())},b}(),c=function(){"use strict";function a(a){return a=decodeURIComponent(a),a=a.replace("+"," ")}function b(a){var b,c,d,e,f,g;if(this.params=[],"undefined"!=typeof a&&null!==a&&""!==a)for(0===a.indexOf("?")&&(a=a.substring(1)),c=a.toString().split(/[&;]/),b=0;b<c.length;b++)d=c[b],e=d.split("="),f=e[0],g=-1===d.indexOf("=")?null:null===e[1]?"":e[1],this.params.push([f,g])}return b.prototype.getParamValue=function(b){var c,d;for(d=0;d<this.params.length;d++)if(c=this.params[d],a(b)===a(c[0]))return c[1]},b.prototype.getParamValues=function(b){var c,d,e=[];for(c=0;c<this.params.length;c++)d=this.params[c],a(b)===a(d[0])&&e.push(d[1]);return e},b.prototype.deleteParam=function(b,c){var d,e,f,g,h=[];for(d=0;d<this.params.length;d++)e=this.params[d],f=a(e[0])===a(b),g=a(e[1])===a(c),(1===arguments.length&&!f||2===arguments.length&&!f&&!g)&&h.push(e);return this.params=h,this},b.prototype.addParam=function(a,b,c){return 3===arguments.length&&-1!==c?(c=Math.min(c,this.params.length),this.params.splice(c,0,[a,b])):arguments.length>0&&this.params.push([a,b]),this},b.prototype.replaceParam=function(b,c,d){var e,f,g=-1;if(3===arguments.length){for(e=0;e<this.params.length;e++)if(f=this.params[e],a(f[0])===a(b)&&decodeURIComponent(f[1])===a(d)){g=e;break}this.deleteParam(b,d).addParam(b,c,g)}else{for(e=0;e<this.params.length;e++)if(f=this.params[e],a(f[0])===a(b)){g=e;break}this.deleteParam(b),this.addParam(b,c,g)}return this},b.prototype.toString=function(){var a,b,c="";for(a=0;a<this.params.length;a++)b=this.params[a],c.length>0&&(c+="&"),c+=null===b[1]?b[0]:b.join("=");return c.length>0?"?"+c:c},b}();a.rg.Uri=b,a.rg.Query=c},"0.0.1",{});
"use strict";YUI.add("rg-ajax",function(a){a.namespace("rg");var b,c=0;a.rg.ajaxDbwAware=function(b,c,d,e,f,g,h){return a.Lang.isUndefined(g)&&(g="GET"),g=g.toUpperCase(),a.rg.ajax(b,c,d,e,f,g,h)},a.rg.ajaxEncodePostData=function(b,c){var d=function e(b,d,f){for(var g in d)if(d.hasOwnProperty(g)){var h=b?b+"["+g+"]":g;a.Lang.isObject(d[g])?e(h,d[g],f):void 0!==d[g]&&null!==d[g]&&(f[h]=c?d[g]:encodeURIComponent(d[g]))}return f};return d("",b,{})},a.rg.ajaxEncodePostDataToQueryString=function(b){var c=a.rg.ajaxEncodePostData(b),d=[];for(var e in c)c.hasOwnProperty(e)&&d.push(e+"="+c[e]);return d.length>0?d.join("&"):null},a.rg.performedRequests=[],a.rg.logAjaxRequest=function(b,c,d,e,f){var g,h;d.getResponseHeader?(g=d.getResponseHeader("X-Correlation-Id"),h=d.getResponseHeader("X-Rg-Pi")?!0:!1):d.headers&&d.headers.get&&(g=d.headers.get("X-Correlation-Id"),h=d.headers.get("X-Rg-Pi")?!0:!1);var i={status:d.status,url:b,method:c,correlationId:g,pageImpression:h,ok:e,duration:f};a.rg.performedRequests.push(i),a.rg.performedRequests.length>50&&a.rg.performedRequests.shift(),a.fire("performedAjaxRequest",i)};var d=function(d,e,f,g,h,i,j){var k=a.merge(j,{Accept:"application/json"});a.Lang.isObject(e)||(e={}),a.Lang.isUndefined(i)&&(i="POST"),("POST"===i||"PUT"===i||"DELETE"===i||"PATCH"===i)&&(e.request_token=a.rg.requestToken.get(),k["Content-Type"]="application/x-www-form-urlencoded"),b=i;var l;return{headers:k,method:i,data:a.rg.ajaxEncodePostDataToQueryString(e),arguments:{fn:f,context:g,args:h},on:{start:function(){l=(new Date).getTime()},success:function(b,k,m){var n,o=(new Date).getTime();if(204===k.status)n={success:!0,result:{},errors:[]};else try{if(a.rg.logAjaxRequest(d,i,k,!0,parseInt(o-l,10)),n=a.JSON.parse(k.responseText),n.debug&&a.Array.each(n.debug,function(b){a.log(b.message,"info"),a.log(b.context,"info")}),n.requestToken&&a.rg.requestToken.update(n.requestToken),n.errors&&"csrf-retry"===n.errors[0]&&5>c)return c++,void a.rg.ajaxDbwAware(d,e,f,g,h,i,j);if(n.success&&(c=0),n.success===!1&&n.result.redirect)return a.log("ajax redirect: "+n.result.redirect),void a.rg.utils.url.forwardTo(n.result.redirect)}catch(p){n={success:!1,result:{},errors:["An error occurred while parsing server response.",p.message]}}a.Lang.isFunction(m.fn)&&m.fn.call(m.context,n,m.args)},failure:function(b,c,e){var f;try{a.rg.logAjaxRequest(d,i,c,!1),f=a.JSON.parse(c.responseText)}catch(g){f={success:!1,result:{},errors:["A server error occurred"]}}f.success=!1,!a.Lang.isFunction(e.fn)||c&&!c.status||e.fn.call(e.context,f,e.args)}}}};a.rg.ajax=function(c,e,f,g,h,i,j){if(!c)throw new Error("Trying to perform ajax request to empty url");if(b&&"GET"!==b||"GET"!==i){var k=new a.rg.Uri(c);k.addQueryParam("dbw","true"),c=k.toString()}return a.io(c,d(c,e,f,g,h,i,j))},a.rg.queueAjax=function(c,e,f,g,h,i,j){if(!c)throw new Error("Trying to queue ajax request to empty url");if(b&&"GET"!==b||"GET"!==i){var k=new a.rg.Uri(c);k.addQueryParam("dbw","true"),c=k.toString()}return a.io.queue(c,d(c,e,f,g,h,i,j))}},"0.0.1",{requires:["io-base","io-queue","json","cookie","rg-uri","rg-utils-url"]});
"use strict";YUI.add("rg-request-token",function(a){a.namespace("rg.requestToken"),a.rg.requestToken.update=function(b){a.one("#Rg-Request-Token").set("content",b)},a.rg.requestToken.updateAll=function(b){a.rg.requestToken.update(b),a.all('input[name="request_token"]').set("value",b)},a.rg.requestToken.get=function(){return a.one("#Rg-Request-Token").get("content")},window.localStorage&&(window.localStorage.setItem("Rg-Request-Token",a.rg.requestToken.get()),window.addEventListener("storage",function(b){"Rg-Request-Token"===b.key&&(a.log("Update request token to "+b.newValue),a.rg.requestToken.updateAll(b.newValue))}))});
"use strict";YUI.add("rg-base",function(){},"0.2.0",{requires:["array-extras","rg-widgetloader","rg-stubloader","base","node","plugin","rg-ajax","event","rg.core.util.ParameterFilter","lazysizes","rg-anim","rg-request-token"]});
